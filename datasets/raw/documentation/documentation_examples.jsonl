{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Below is an example of query clauses being used in query and filter context in the search API", "output": "{\"query\":{\"bool\":{\"must\":[{\"match\":{\"title\":\"Search\"}},{\"match\":{\"content\":\"Elasticsearch\"}}],\"filter\":[{\"term\":{\"status\":\"published\"}},{\"range\":{\"publish_date\":{\"gte\":\"2015-01-01\"}}}]}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Create a term query", "output": "{\"query\":{\"term\":{\"user.id\":{\"value\":\"kimchy\",\"boost\":1.0}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html"}
{"task": "mapping_create", "domain": "elasticsearch/official-docs", "instruction": "Create an index with a text field called full_text", "output": "{\"mappings\":{\"properties\":{\"full_text\":{\"type\":\"text\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Use the term query to search for Quick Brown Foxes! in the full_text field", "output": "{\"query\":{\"term\":{\"full_text\":\"Quick Brown Foxes!\"}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Use the match query to search for Quick Brown Foxes! in the full_text field", "output": "{\"query\":{\"match\":{\"full_text\":\"Quick Brown Foxes!\"}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Create a match query", "output": "{\"query\":{\"match\":{\"message\":{\"query\":\"this is a test\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "You can simplify the match query syntax by combining the <field> and query parameters", "output": "{\"query\":{\"match\":{\"message\":\"this is a test\"}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Here is an example with the operator parameter:", "output": "{\"query\":{\"match\":{\"message\":{\"query\":\"this is a test\",\"operator\":\"and\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Fuzzy matching is not applied to terms with synonyms or in cases where the analysis process produces multiple tokens at the same position", "output": "{\"query\":{\"match\":{\"message\":{\"query\":\"this is a testt\",\"fuzziness\":\"AUTO\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "If the analyzer used removes all tokens in a query like a stop filter does, the default behavior is to match no documents at all", "output": "{\"query\":{\"match\":{\"message\":{\"query\":\"to be or not to be\",\"operator\":\"and\",\"zero_terms_query\":\"all\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "It is also possible to match multi terms synonyms with conjunctions instead:", "output": "{\"query\":{\"match\":{\"message\":{\"query\":\"ny city\",\"auto_generate_synonyms_phrase_query\":false}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "The bool query takes a more-matches-is-better approach, so the score from each matching must or should clause will be added together to provide the final _score for each document", "output": "{\"query\":{\"bool\":{\"must\":{\"term\":{\"user.id\":\"kimchy\"}},\"filter\":{\"term\":{\"tags\":\"production\"}},\"must_not\":{\"range\":{\"age\":{\"gte\":10,\"lte\":20}}},\"should\":[{\"term\":{\"tags\":\"env1\"}},{\"term\":{\"tags\":\"deployed\"}}],\"minimum_should_match\":1,\"boost\":1.0}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Create a bool query", "output": "{\"query\":{\"bool\":{\"must\":[{\"bool\":{\"should\":[{\"match\":{\"user.id\":\"kimchy\"}},{\"match\":{\"user.id\":\"banon\"}}]}},{\"match\":{\"tags\":\"production\"}}],\"should\":[{\"bool\":{\"must\":[{\"match\":{\"status\":\"active\"}},{\"match\":{\"title\":\"quick brown fox\"}}]}}]}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "This first query assigns a score of 0 to all documents, as no scoring query has been specified:", "output": "{\"query\":{\"bool\":{\"filter\":{\"term\":{\"status\":\"active\"}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "This bool query has a match_all query, which assigns a score of 1", "output": "{\"query\":{\"bool\":{\"must\":{\"match_all\":{}},\"filter\":{\"term\":{\"status\":\"active\"}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "This constant_score query behaves in exactly the same way as the second example above", "output": "{\"query\":{\"constant_score\":{\"filter\":{\"term\":{\"status\":\"active\"}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Supplying duplicate _name values in the same request results in undefined behavior", "output": "{\"query\":{\"bool\":{\"should\":[{\"match\":{\"name.first\":{\"query\":\"shay\",\"_name\":\"first\"}}},{\"match\":{\"name.last\":{\"query\":\"banon\",\"_name\":\"last\"}}}],\"filter\":{\"terms\":{\"name.last\":[\"banon\",\"kimchy\"],\"_name\":\"test\"}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Note that the score might not have contributed to the final score of the document, for instance named queries that appear in a filter or must_not contexts, or inside a clause that ignores or modifies ", "output": "{\"query\":{\"bool\":{\"should\":[{\"match\":{\"name.first\":{\"query\":\"shay\",\"_name\":\"first\"}}},{\"match\":{\"name.last\":{\"query\":\"banon\",\"_name\":\"last\"}}}],\"filter\":{\"terms\":{\"name.last\":[\"banon\",\"kimchy\"],\"_name\":\"test\"}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "The following search returns documents where the age field contains a term between 10 and 20", "output": "{\"query\":{\"range\":{\"age\":{\"gte\":10,\"lte\":20,\"boost\":2.0}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-range-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "For example, the following search returns documents where the timestamp field contains a date between today and yesterday", "output": "{\"query\":{\"range\":{\"timestamp\":{\"gte\":\"now-1d/d\",\"lte\":\"now/d\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-range-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "You can use the time_zone parameter to convert date values to UTC using a UTC offset", "output": "{\"query\":{\"range\":{\"timestamp\":{\"time_zone\":\"+01:00\",\"gte\":\"2020-01-01T00:00:00\",\"lte\":\"now\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-range-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Create a exists query", "output": "{\"query\":{\"exists\":{\"field\":\"user\"}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-exists-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "The following search returns documents that are missing an indexed value for the user", "output": "{\"query\":{\"bool\":{\"must_not\":{\"exists\":{\"field\":\"user.id\"}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-exists-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "The following search returns documents where the user", "output": "{\"query\":{\"wildcard\":{\"user.id\":{\"value\":\"ki*y\",\"boost\":1.0,\"rewrite\":\"constant_score_blended\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-wildcard-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "The following search returns documents where the user", "output": "{\"query\":{\"prefix\":{\"user.id\":{\"value\":\"ki\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-prefix-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "You can simplify the prefix query syntax by combining the <field> and value parameters", "output": "{\"query\":{\"prefix\":{\"user\":\"ki\"}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-prefix-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "The multi_match query builds on the match query to allow multi-field queries:", "output": "{\"query\":{\"multi_match\":{\"query\":\"this is a test\",\"fields\":[\"subject\",\"message\"]}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Fields can be specified with wildcards, eg:", "output": "{\"query\":{\"multi_match\":{\"query\":\"Will Smith\",\"fields\":[\"title\",\"*_name\"]}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Individual fields can be boosted with the caret (^) notation:", "output": "{\"query\":{\"multi_match\":{\"query\":\"this is a test\",\"fields\":[\"subject^3\",\"message\"]}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "The best_fields type generates a match query for each field and wraps them in a dis_max query, to find the single best matching field", "output": "{\"query\":{\"multi_match\":{\"query\":\"brown fox\",\"type\":\"best_fields\",\"fields\":[\"subject\",\"message\"],\"tie_breaker\":0.3}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "would be executed as:", "output": "{\"query\":{\"dis_max\":{\"queries\":[{\"match\":{\"subject\":\"brown fox\"}},{\"match\":{\"message\":\"brown fox\"}}],\"tie_breaker\":0.3}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Take this query for example:", "output": "{\"query\":{\"multi_match\":{\"query\":\"Will Smith\",\"type\":\"best_fields\",\"fields\":[\"first_name\",\"last_name\"],\"operator\":\"and\"}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Create a multi_match query", "output": "{\"query\":{\"multi_match\":{\"query\":\"quick brown fox\",\"type\":\"most_fields\",\"fields\":[\"title\",\"title.original\",\"title.shingles\"]}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "would be executed as:", "output": "{\"query\":{\"bool\":{\"should\":[{\"match\":{\"title\":\"quick brown fox\"}},{\"match\":{\"title.original\":\"quick brown fox\"}},{\"match\":{\"title.shingles\":\"quick brown fox\"}}]}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Create a multi_match query", "output": "{\"query\":{\"multi_match\":{\"query\":\"quick brown f\",\"type\":\"phrase_prefix\",\"fields\":[\"subject\",\"message\"]}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "would be executed as:", "output": "{\"query\":{\"dis_max\":{\"queries\":[{\"match_phrase_prefix\":{\"subject\":\"quick brown f\"}},{\"match_phrase_prefix\":{\"message\":\"quick brown f\"}}]}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Create a multi_match query", "output": "{\"query\":{\"multi_match\":{\"query\":\"Will Smith\",\"type\":\"cross_fields\",\"fields\":[\"first_name\",\"last_name\"],\"operator\":\"and\"}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "For instance, if we have a first and last field which have the same analyzer, plus a first", "output": "{\"query\":{\"multi_match\":{\"query\":\"Jon\",\"type\":\"cross_fields\",\"fields\":[\"first\",\"first.edge\",\"last\",\"last.edge\"]}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "You can easily rewrite this query yourself as two separate cross_fields queries combined with a dis_max query, and apply the minimum_should_match parameter to just one of them:", "output": "{\"query\":{\"dis_max\":{\"queries\":[{\"multi_match\":{\"query\":\"Will Smith\",\"type\":\"cross_fields\",\"fields\":[\"first\",\"last\"],\"minimum_should_match\":\"50%\"}},{\"multi_match\":{\"query\":\"Will Smith\",\"type\":\"cross_fields\",\"fields\":[\"*.edge\"]}}]}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "You can force all fields into the same group by specifying the analyzer parameter in the query", "output": "{\"query\":{\"multi_match\":{\"query\":\"Jon\",\"type\":\"cross_fields\",\"analyzer\":\"standard\",\"fields\":[\"first\",\"last\",\"*.edge\"]}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "The bool_prefix typeâs scoring behaves like most_fields, but using a match_bool_prefix query instead of a match query", "output": "{\"query\":{\"multi_match\":{\"query\":\"quick brown f\",\"type\":\"bool_prefix\",\"fields\":[\"subject\",\"message\"]}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html"}
{"task": "mapping_create", "domain": "elasticsearch/official-docs", "instruction": "To use the nested query, your index must include a nested field mapping", "output": "{\"mappings\":{\"properties\":{\"obj1\":{\"type\":\"nested\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-nested-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Create a nested query", "output": "{\"query\":{\"nested\":{\"path\":\"obj1\",\"query\":{\"bool\":{\"must\":[{\"match\":{\"obj1.name\":\"blue\"}},{\"range\":{\"obj1.count\":{\"gt\":5}}}]}},\"score_mode\":\"avg\"}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-nested-query.html"}
{"task": "mapping_create", "domain": "elasticsearch/official-docs", "instruction": "To see how multi-level nested queries work, first you need an index that has nested fields", "output": "{\"mappings\":{\"properties\":{\"driver\":{\"type\":\"nested\",\"properties\":{\"last_name\":{\"type\":\"text\"},\"vehicle\":{\"type\":\"nested\",\"properties\":{\"make\":{\"type\":\"text\"},\"model\":{\"type\":\"text\"}}}}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-nested-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "You can now use a multi-level nested query to match documents based on the make and model fields", "output": "{\"query\":{\"nested\":{\"path\":\"driver\",\"query\":{\"nested\":{\"path\":\"driver.vehicle\",\"query\":{\"bool\":{\"must\":[{\"match\":{\"driver.vehicle.make\":\"Powell Motors\"}},{\"match\":{\"driver.vehicle.model\":\"Canyonero\"}}]}}}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-nested-query.html"}
{"task": "mapping_create", "domain": "elasticsearch/official-docs", "instruction": "For example, the following search uses an outer nested query with an inner must_not clause", "output": "{\"mappings\":{\"properties\":{\"comments\":{\"type\":\"nested\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-nested-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "To exclude documents with any nested objects that match the nested query, use an outer must_not clause", "output": "{\"query\":{\"bool\":{\"must_not\":[{\"nested\":{\"path\":\"comments\",\"query\":{\"term\":{\"comments.author\":\"nik9000\"}}}}]}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-nested-query.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "You can run aggregations as part of a search by specifying the search API's aggs parameter", "output": "{\"aggs\":{\"my-agg-name\":{\"terms\":{\"field\":\"my-field\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Use the query parameter to limit the documents on which an aggregation runs:", "output": "{\"query\":{\"range\":{\"@timestamp\":{\"gte\":\"now-1d/d\",\"lt\":\"now/d\"}}},\"aggs\":{\"my-agg-name\":{\"terms\":{\"field\":\"my-field\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "By default, searches containing an aggregation return both search hits and aggregation results", "output": "{\"size\":0,\"aggs\":{\"my-agg-name\":{\"terms\":{\"field\":\"my-field\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "You can specify multiple aggregations in the same request:", "output": "{\"aggs\":{\"my-first-agg-name\":{\"terms\":{\"field\":\"my-field\"}},\"my-second-agg-name\":{\"avg\":{\"field\":\"my-other-field\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Bucket aggregations support bucket or metric sub-aggregations", "output": "{\"aggs\":{\"my-agg-name\":{\"terms\":{\"field\":\"my-field\"},\"aggs\":{\"my-sub-agg-name\":{\"avg\":{\"field\":\"my-other-field\"}}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Use the meta object to associate custom metadata with an aggregation:", "output": "{\"aggs\":{\"my-agg-name\":{\"terms\":{\"field\":\"my-field\"},\"meta\":{\"my-metadata-field\":\"foo\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "By default, aggregation results include the aggregationâs name but not its type", "output": "{\"aggs\":{\"my-agg-name\":{\"histogram\":{\"field\":\"my-field\",\"interval\":1000}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "When a field doesnât exactly match the aggregation you need, you should aggregate on a runtime field:", "output": "{\"runtime_mappings\":{\"message.length\":{\"type\":\"long\",\"script\":\"emit(doc['message.keyword'].value.length())\"}},\"aggs\":{\"message_length\":{\"histogram\":{\"interval\":10,\"field\":\"message.length\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"genres\":{\"terms\":{\"field\":\"genre\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"products\":{\"terms\":{\"field\":\"product\",\"size\":5,\"show_term_doc_count_error\":true}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"genres\":{\"terms\":{\"field\":\"genre\",\"order\":{\"_key\":\"asc\"}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"genres\":{\"terms\":{\"field\":\"genre\",\"order\":{\"max_play_count\":\"desc\"}},\"aggs\":{\"max_play_count\":{\"max\":{\"field\":\"play_count\"}}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"genres\":{\"terms\":{\"field\":\"genre\",\"order\":{\"playback_stats.max\":\"desc\"}},\"aggs\":{\"playback_stats\":{\"stats\":{\"field\":\"play_count\"}}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"countries\":{\"terms\":{\"field\":\"artist.country\",\"order\":{\"rock>playback_stats.avg\":\"desc\"}},\"aggs\":{\"rock\":{\"filter\":{\"term\":{\"genre\":\"rock\"}},\"aggs\":{\"playback_stats\":{\"stats\":{\"field\":\"play_count\"}}}}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"countries\":{\"terms\":{\"field\":\"artist.country\",\"order\":[{\"rock>playback_stats.avg\":\"desc\"},{\"_count\":\"desc\"}]},\"aggs\":{\"rock\":{\"filter\":{\"term\":{\"genre\":\"rock\"}},\"aggs\":{\"playback_stats\":{\"stats\":{\"field\":\"play_count\"}}}}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"genres\":{\"terms\":{\"field\":\"genre\",\"order\":{\"_count\":\"asc\"}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"tags\":{\"terms\":{\"field\":\"tags\",\"min_doc_count\":10}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"tags\":{\"terms\":{\"field\":\"tags\",\"include\":\".*sport.*\",\"exclude\":\"water_.*\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"JapaneseCars\":{\"terms\":{\"field\":\"make\",\"include\":[\"mazda\",\"honda\"]}},\"ActiveCarManufacturers\":{\"terms\":{\"field\":\"make\",\"exclude\":[\"rover\",\"jensen\"]}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"size\":0,\"aggs\":{\"expired_sessions\":{\"terms\":{\"field\":\"account_id\",\"include\":{\"partition\":0,\"num_partitions\":20},\"size\":10000,\"order\":{\"last_access\":\"asc\"}},\"aggs\":{\"last_access\":{\"max\":{\"field\":\"access_date\"}}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"actors\":{\"terms\":{\"field\":\"actors\",\"size\":10},\"aggs\":{\"costars\":{\"terms\":{\"field\":\"actors\",\"size\":5}}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"actors\":{\"terms\":{\"field\":\"actors\",\"size\":10,\"collect_mode\":\"breadth_first\"},\"aggs\":{\"costars\":{\"terms\":{\"field\":\"actors\",\"size\":5}}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"tags\":{\"terms\":{\"field\":\"tags\",\"execution_hint\":\"map\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"tags\":{\"terms\":{\"field\":\"tags\",\"missing\":\"N/A\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Terms aggregation | Reference", "output": "{\"aggs\":{\"ip_addresses\":{\"terms\":{\"field\":\"destination_ip\",\"missing\":\"0.0.0.0\",\"value_type\":\"ip\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Date histogram aggregation | Reference", "output": "{\"aggs\":{\"sales_over_time\":{\"date_histogram\":{\"field\":\"date\",\"calendar_interval\":\"month\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-datehistogram-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Date histogram aggregation | Reference", "output": "{\"aggs\":{\"sales_over_time\":{\"date_histogram\":{\"field\":\"date\",\"calendar_interval\":\"2d\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-datehistogram-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Date histogram aggregation | Reference", "output": "{\"aggs\":{\"sales_over_time\":{\"date_histogram\":{\"field\":\"date\",\"fixed_interval\":\"30d\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-datehistogram-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Date histogram aggregation | Reference", "output": "{\"aggs\":{\"sales_over_time\":{\"date_histogram\":{\"field\":\"date\",\"fixed_interval\":\"2w\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-datehistogram-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Date histogram aggregation | Reference", "output": "{\"aggs\":{\"sales_over_time\":{\"date_histogram\":{\"field\":\"date\",\"calendar_interval\":\"1M\",\"format\":\"yyyy-MM-dd\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-datehistogram-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "If you specify a time_zone of -01:00, midnight in that time zone is one hour before midnight UTC:", "output": "{\"aggs\":{\"by_day\":{\"date_histogram\":{\"field\":\"date\",\"calendar_interval\":\"day\",\"time_zone\":\"-01:00\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-datehistogram-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Date histogram aggregation | Reference", "output": "{\"aggs\":{\"sales_over_time\":{\"date_histogram\":{\"field\":\"date\",\"calendar_interval\":\"1M\",\"format\":\"yyyy-MM-dd\",\"keyed\":true}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-datehistogram-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Date histogram aggregation | Reference", "output": "{\"aggs\":{\"sale_date\":{\"date_histogram\":{\"field\":\"date\",\"calendar_interval\":\"year\",\"missing\":\"2000/01/01\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-datehistogram-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Date histogram aggregation | Reference", "output": "{\"runtime_mappings\":{\"date.day_of_week\":{\"type\":\"keyword\",\"script\":\"emit(doc['date'].value.dayOfWeekEnum.getDisplayName(TextStyle.FULL, Locale.ENGLISH))\"}},\"aggs\":{\"day_of_week\":{\"terms\":{\"field\":\"date.day_of_week\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-datehistogram-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Assuming the data consists of documents representing exams grades (between 0 and 100) of students we can average their scores with:", "output": "{\"aggs\":{\"avg_grade\":{\"avg\":{\"field\":\"grade\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-avg-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Letâs say the exam was exceedingly difficult, and you need to apply a grade correction", "output": "{\"runtime_mappings\":{\"grade.corrected\":{\"type\":\"double\",\"script\":{\"source\":\"emit(Math.min(100, doc['grade'].value * params.correction))\",\"params\":{\"correction\":1.2}}}},\"aggs\":{\"avg_corrected_grade\":{\"avg\":{\"field\":\"grade.corrected\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-avg-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "The missing parameter defines how documents that are missing a value should be treated", "output": "{\"aggs\":{\"grade_avg\":{\"avg\":{\"field\":\"grade\",\"missing\":10}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-avg-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Assuming the data consists of documents representing sales records we can sum the sale price of all hats with:", "output": "{\"query\":{\"constant_score\":{\"filter\":{\"match\":{\"type\":\"hat\"}}}},\"aggs\":{\"hat_prices\":{\"sum\":{\"field\":\"price\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-sum-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "The missing parameter defines how documents that are missing a value should be treated", "output": "{\"query\":{\"constant_score\":{\"filter\":{\"match\":{\"type\":\"hat\"}}}},\"aggs\":{\"hat_prices\":{\"sum\":{\"field\":\"price\",\"missing\":100}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-sum-aggregation.html"}
{"task": "mapping_create", "domain": "elasticsearch/official-docs", "instruction": "For example, for the following index that stores pre-aggregated histograms with latency metrics for different networks:", "output": "{\"mappings\":{\"properties\":{\"latency_histo\":{\"type\":\"histogram\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-sum-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "Assume you are indexing store sales and would like to count the unique number of sold products that match a query:", "output": "{\"aggs\":{\"type_count\":{\"cardinality\":{\"field\":\"type\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-cardinality-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "This aggregation also supports the precision_threshold option:", "output": "{\"aggs\":{\"type_count\":{\"cardinality\":{\"field\":\"type\",\"precision_threshold\":100}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-cardinality-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "If you need the cardinality of the combination of two fields, create a runtime field combining them and aggregate it", "output": "{\"runtime_mappings\":{\"type_and_promoted\":{\"type\":\"keyword\",\"script\":\"emit(doc['type'].value + ' ' + doc['promoted'].value)\"}},\"aggs\":{\"type_promoted_count\":{\"cardinality\":{\"field\":\"type_and_promoted\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-cardinality-aggregation.html"}
{"task": "query_dsl", "domain": "elasticsearch/official-docs", "instruction": "The missing parameter defines how documents that are missing a value should be treated", "output": "{\"aggs\":{\"tag_cardinality\":{\"cardinality\":{\"field\":\"tag\",\"missing\":\"N/A\"}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-cardinality-aggregation.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "You can also use the ingest APIs to create and manage pipelines", "output": "{\"description\":\"My optional pipeline description\",\"processors\":[{\"set\":{\"description\":\"My optional processor description\",\"field\":\"my-long-field\",\"value\":10}},{\"set\":{\"description\":\"Set 'my-boolean-field' to true\",\"field\":\"my-boolean-field\",\"value\":true}},{\"lowercase\":{\"field\":\"my-keyword-field\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "Processors have read and write access to an incoming documentâs source fields", "output": "{\"processors\":[{\"set\":{\"field\":\"my-long-field\",\"value\":10}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "You can also prepend the _source prefix", "output": "{\"processors\":[{\"set\":{\"field\":\"_source.my-long-field\",\"value\":10}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "If your document contains flattened objects, use the dot_expander processor to expand them", "output": "{\"processors\":[{\"dot_expander\":{\"description\":\"Expand 'my-object-field.my-property'\",\"field\":\"my-object-field.my-property\"}},{\"set\":{\"description\":\"Set 'my-object-field.my-property' to 10\",\"field\":\"my-object-field.my-property\",\"value\":10}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "Several processor parameters support Mustache template snippets", "output": "{\"processors\":[{\"set\":{\"description\":\"Set dynamic '<service>' field to 'code' value\",\"field\":\"{{{service}}}\",\"value\":\"{{{code}}}\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "The field_access_pattern property on an ingest pipeline defines how ingest document fields are read and written for all processors in the current pipeline", "output": "{\"field_access_pattern\":\"classic\",\"processors\":[{\"set\":{\"description\":\"Set some searchable tags in our document's flattened field\",\"field\":\"event.tags.ingest.processed_by\",\"value\":\"my-pipeline\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "Processors can access the following metadata fields by name:", "output": "{\"processors\":[{\"set\":{\"description\":\"Set '_routing' to 'geoip.country_iso_code' value\",\"field\":\"_routing\",\"value\":\"{{{geoip.country_iso_code}}}\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "Use a Mustache template snippet to access metadata field values", "output": "{\"processors\":[{\"set\":{\"description\":\"Use geo_point dynamic template for address field\",\"field\":\"_dynamic_templates\",\"value\":{\"address\":\"geo_point\"}}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "Pipelines only create the _ingest", "output": "{\"processors\":[{\"set\":{\"description\":\"Index the ingest timestamp as 'event.ingested'\",\"field\":\"event.ingested\",\"value\":\"{{{_ingest.timestamp}}}\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "To ignore a processor failure and run the pipelineâs remaining processors, set ignore_failure to true", "output": "{\"processors\":[{\"rename\":{\"description\":\"Rename 'provider' to 'cloud.provider'\",\"field\":\"provider\",\"target_field\":\"cloud.provider\",\"ignore_failure\":true}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "Use the on_failure parameter to specify a list of processors to run immediately after a processor failure", "output": "{\"processors\":[{\"rename\":{\"description\":\"Rename 'provider' to 'cloud.provider'\",\"field\":\"provider\",\"target_field\":\"cloud.provider\",\"on_failure\":[{\"set\":{\"description\":\"Set 'error.message'\",\"field\":\"error.message\",\"value\":\"Field 'provider' does not exist. Cannot rename to 'cloud.provider'\",\"override\":false}}]}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "Nest a list of on_failure processors for nested error handling", "output": "{\"processors\":[{\"rename\":{\"description\":\"Rename 'provider' to 'cloud.provider'\",\"field\":\"provider\",\"target_field\":\"cloud.provider\",\"on_failure\":[{\"set\":{\"description\":\"Set 'error.message'\",\"field\":\"error.message\",\"value\":\"Field 'provider' does not exist. Cannot rename to 'cloud.provider'\",\"override\":false,\"on_failure\":[{\"set\":{\"description\":\"Set 'error.message.multi'\",\"field\":\"error.message.multi\",\"value\":\"Document encountered multiple ingest errors\",\"override\":true}}]}}]}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "if condition scripts run in Painlessâs ingest processor context", "output": "{\"processors\":[{\"drop\":{\"description\":\"Drop documents with 'network.name' of 'Guest'\",\"if\":\"ctx?.network?.name == 'Guest'\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "If possible, avoid using regular expressions", "output": "{\"processors\":[{\"set\":{\"description\":\"If 'url.scheme' is 'http', set 'url.insecure' to true\",\"if\":\"ctx.url?.scheme =~ /^http[^s]/\",\"field\":\"url.insecure\",\"value\":true}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "If you canât rewrite a script to be null safe, include an explicit null check", "output": "{\"processors\":[{\"drop\":{\"description\":\"Drop documents that contain 'network.name' of 'Guest'\",\"if\":\"ctx.network?.name != null && ctx.network.name.contains('Guest')\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "Combine an if condition with the pipeline processor to apply other pipelines to documents based on your criteria", "output": "{\"processors\":[{\"pipeline\":{\"description\":\"If 'service.name' is 'apache_httpd', use 'httpd_pipeline'\",\"if\":\"ctx.service?.name == 'apache_httpd'\",\"name\":\"httpd_pipeline\"}},{\"pipeline\":{\"description\":\"If 'service.name' is 'syslog', use 'syslog_pipeline'\",\"if\":\"ctx.service?.name == 'syslog'\",\"name\":\"syslog_pipeline\"}},{\"fail\":{\"description\":\"If 'service.name' is not 'apache_httpd' or 'syslog', return a failure message\",\"if\":\"ctx.service?.name != 'apache_httpd' && ctx.service?.name != 'syslog'\",\"message\":\"This pipeline requires service.name to be either `syslog` or `apache_httpd`\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/ingest.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "Here is an example that uses the default city database and adds the geographical information to the geoip field based on the ip field:", "output": "{\"description\":\"Add ip geolocation info\",\"processors\":[{\"geoip\":{\"field\":\"ip\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/geoip-processor.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "Here is an example that uses the default country database and adds the geographical information to the geo field based on the ip field", "output": "{\"description\":\"Add ip geolocation info\",\"processors\":[{\"geoip\":{\"field\":\"ip\",\"target_field\":\"geo\",\"database_file\":\"GeoLite2-Country.mmdb\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/geoip-processor.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "Here is an example of what documents will be indexed as when information for \"80", "output": "{\"description\":\"Add ip geolocation info\",\"processors\":[{\"geoip\":{\"field\":\"ip\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/geoip-processor.html"}
{"task": "mapping_create", "domain": "elasticsearch/official-docs", "instruction": "You can use the following mapping for the example index above:", "output": "{\"mappings\":{\"properties\":{\"geoip\":{\"properties\":{\"location\":{\"type\":\"geo_point\"}}}}}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/geoip-processor.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "You can add your own patterns to a processor definition under the pattern_definitions option", "output": "{\"description\":\"...\",\"processors\":[{\"grok\":{\"field\":\"message\",\"patterns\":[\"my %{FAVORITE_DOG:dog} is colored %{RGB:color}\"],\"pattern_definitions\":{\"FAVORITE_DOG\":\"beagle\",\"RGB\":\"RED|GREEN|BLUE\"}}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/grok-processor.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "Here is an example that adds the parsed date to the timestamp field based on the initial_date field:", "output": "{\"description\":\"...\",\"processors\":[{\"date\":{\"field\":\"initial_date\",\"target_field\":\"timestamp\",\"formats\":[\"dd/MM/yyyy HH:mm:ss\"],\"timezone\":\"Europe/Amsterdam\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/date-processor.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "The timezone and locale processor parameters are templated", "output": "{\"description\":\"...\",\"processors\":[{\"date\":{\"field\":\"initial_date\",\"target_field\":\"timestamp\",\"formats\":[\"ISO8601\"],\"timezone\":\"{{{my_timezone}}}\",\"locale\":\"{{{my_locale}}}\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/date-processor.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "In the example below, the message field in the input is expected to be a string formed of a local date-time in yyyyMMddHHmmss format, a timezone abbreviated to one of PST, CET, or JST representing Pac", "output": "{\"description\":\"...\",\"processors\":[{\"grok\":{\"field\":\"message\",\"patterns\":[\"%{DATESTAMP_EVENTLOG:local_date_time} %{TZ:short_tz} %{GREEDYDATA:payload}\"],\"pattern_definitions\":{\"TZ\":\"[A-Z]{3}\"}}},{\"script\":{\"source\":\"ctx['full_tz'] = params['tz_map'][ctx['short_tz']]\",\"params\":{\"tz_map\":{\"PST\":\"America/Los_Angeles\",\"CET\":\"Europe/Amsterdam\",\"JST\":\"Asia/Tokyo\"}}}},{\"date\":{\"field\":\"local_date_time\",\"formats\":[\"yyyyMMddHHmmss\"],\"timezone\":\"{{{full_tz}}}\"}},{\"remove\":{\"field\":[\"message\",\"local_date_time\",\"short_tz\",\"full_tz\"]}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/date-processor.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "This processor can also be used to copy data from one field to another", "output": "{\"description\":\"sets the value of host.os.name from the field os\",\"processors\":[{\"set\":{\"field\":\"host.os.name\",\"value\":\"{{{os}}}\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/set-processor.html"}
{"task": "pipeline_create", "domain": "elasticsearch/official-docs", "instruction": "The contents of a field including complex values such as arrays and objects can be copied to another field using copy_from:", "output": "{\"description\":\"sets the value of bar from the field foo\",\"processors\":[{\"set\":{\"field\":\"bar\",\"copy_from\":\"foo\"}}]}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/set-processor.html"}
{"task": "mapping_create", "domain": "elasticsearch/official-docs", "instruction": "Using the API, the following request creates an index template that is composed of the two component templates shown in the component templates example", "output": "{\"index_patterns\":[\"te*\",\"bar*\"],\"template\":{\"settings\":{\"number_of_shards\":1},\"mappings\":{\"_source\":{\"enabled\":true},\"properties\":{\"host_name\":{\"type\":\"keyword\"},\"created_at\":{\"type\":\"date\",\"format\":\"EEE MMM dd HH:mm:ss Z yyyy\"}}},\"aliases\":{\"mydata\":{}}},\"priority\":501,\"composed_of\":[\"component_template1\",\"runtime_component_template\"],\"version\":3,\"_meta\":{\"description\":\"my custom\"}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/index-templates.html"}
{"task": "mapping_create", "domain": "elasticsearch/official-docs", "instruction": "Using the API, the following request creates an index template that is composed of the two component templates shown in the component templates example", "output": "{\"index_patterns\":[\"te*\",\"bar*\"],\"template\":{\"settings\":{\"number_of_shards\":1},\"mappings\":{\"_source\":{\"enabled\":true},\"properties\":{\"host_name\":{\"type\":\"keyword\"},\"created_at\":{\"type\":\"date\",\"format\":\"EEE MMM dd HH:mm:ss Z yyyy\"}}},\"aliases\":{\"mydata\":{}}},\"priority\":501,\"composed_of\":[\"component_template1\",\"runtime_component_template\"],\"version\":3,\"_meta\":{\"description\":\"my custom\"}}", "source": "elasticsearch/documentation", "source_url": "https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-templates.html"}
